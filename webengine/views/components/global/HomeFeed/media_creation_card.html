<style>
  .post-creator {
  }
  .content-buttons {
    display: flex;
    justify-content: space-between;
  }
  .content-button {
    flex: 1;
    text-align: center;
    padding: 0.5rem;
    background-color: #f8f9fa;
    border: 1px solid #dee2e6;
    border-radius: 0.25rem;
    margin: 0 0.25rem;
    cursor: pointer;
    transition: background-color 0.2s;
  }
  .content-button:hover {
    background-color: #e9ecef;
  }
  .content-button i {
    margin-right: 0.5rem;
  }
  .post-creator-button {
    text-align: left;
    color: #6c757d; /* Placeholder-like color */
    font-weight: normal;
  }
</style>

<div class="post-creator">
  <div class="card">
    <div class="card-body">
      <button
        class="create-post form-control border mb-3 post-creator-button d-none"
      >
        Write Post
      </button>
      <div class="content-buttons">
        <div class="content-button d-none">
          <i class="bi bi-image"></i> Media
        </div>
        <button
          class="create-story btn btn-primary w-100"
          type="button"
          id="makePostBtn"
        >
          <i class="bi bi-pencil-square"></i> Make a Post
        </button>
        <button
          class="content-button create-event d-none"
          data-bs-toggle="modal"
          data-bs-target="#createEventModal"
        >
          <i class="bi bi-calendar-event"></i> Event
        </button>
      </div>
    </div>
  </div>
</div>

<script type="module">
$(document).ready(function() {
  $("#makePostBtn").on("click", async function(e) {
    e.preventDefault();
    
    const $btn = $(this);
    const originalHtml = $btn.html();
    
    // Show loading state
    $btn.prop("disabled", true).html(`
      <span class="spinner-border spinner-border-sm me-2" role="status" aria-hidden="true"></span>
      Checking...
    `);
    
    try {
      if (typeof window.showCreateStoryModal === 'function') {
        await window.showCreateStoryModal();
      } else {
        // Fallback if function not loaded yet
        $("#createStoryModal").modal("show");
      }
    } catch (error) {
      console.error("Error showing create story modal:", error);
      // Fallback - just show the modal
      $("#createStoryModal").modal("show");
    } finally {
      // Restore button state
      $btn.prop("disabled", false).html(originalHtml);
    }
  });
});
</script>
